<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customizable Sentence Template</title>
    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f4f4f4;
        }

        .container {
            text-align: center;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1, h2 {
            margin-bottom: 20px;
        }

        textarea {
            width: 100%;
            height: 60px;
            margin-bottom: 10px;
            padding: 10px;
        }

        .new-template-section {
            margin-bottom: 40px;
        }

        .template-section {
            margin-bottom: 20px;
        }

        .template-section select {
            margin-bottom: 20px;
            padding: 10px;
        }

        #templateDisplay {
            margin-bottom: 20px;
            font-size: 18px;
        }

        .input-fields {
            margin-bottom: 20px;
        }

        .input-fields label {
            margin-right: 10px;
        }

        .input-fields input {
            margin-right: 20px;
            padding: 5px;
        }

        .buttons button {
            margin-right: 10px;
            padding: 10px 15px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">Customizable Sentence Template</h1>

        <div class="new-template-section mt-5">
            <h2>Create New Template</h2>
            <textarea id="newTemplate" class="form-control mb-3" placeholder="Enter your sentence template here. Use &lt;word&gt; for replaceable words."></textarea>
            <button class="btn btn-primary" onclick="addTemplate()">Add Template</button>
        </div>

        <div class="template-section mt-5">
            <h2>Templates</h2>
            <select id="templateSelect" class="form-control mb-3" onchange="loadTemplate()">
                <option value="">Select a template</option>
            </select>
            <div id="templateDisplay" class="mb-3"></div>
            <div id="inputFields" class="form-group"></div>
            <div class="buttons mb-3">
                <button class="btn btn-secondary" onclick="updateTemplate()">Apply</button>
                <button class="btn btn-info" onclick="copyTemplate()">Copy</button>
                <button class="btn btn-success" onclick="saveTemplate()">Save</button>
                <button class="btn btn-danger" onclick="deleteTemplate()">Delete</button>
                <button class="btn btn-warning" onclick="resetTemplates()">Reset</button>
            </div>
        </div>
        <textarea id="savedTemplate" class="form-control" readonly></textarea>
    </div>

    <!-- jQuery and Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        let templates = [];

        // Load templates from localStorage on page load
        document.addEventListener('DOMContentLoaded', () => {
            loadTemplatesFromLocalStorage();
            updateTemplateSelect();
        });

        function addTemplate() {
            const newTemplate = document.getElementById('newTemplate').value;
            if (newTemplate) {
                templates.push(newTemplate);
                saveTemplatesToLocalStorage();
                updateTemplateSelect();
                document.getElementById('newTemplate').value = '';
            } else {
                alert('Please enter a template.');
            }
        }

        function updateTemplateSelect() {
            const templateSelect = document.getElementById('templateSelect');
            templateSelect.innerHTML = '<option value="">Select a template</option>';
            templates.forEach((template, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = template;
                templateSelect.appendChild(option);
            });
        }

        function loadTemplate() {
            const templateIndex = document.getElementById('templateSelect').value;
            if (templateIndex !== '') {
                const template = templates[templateIndex];
                document.getElementById('templateDisplay').innerHTML = template;
                generateInputFields(template);
            } else {
                document.getElementById('templateDisplay').innerHTML = '';
                document.getElementById('inputFields').innerHTML = '';
            }
        }

        function generateInputFields(template) {
            const regex = /<([^>]+)>/g;
            let match;
            const inputFields = document.getElementById('inputFields');
            inputFields.innerHTML = '';

            while ((match = regex.exec(template)) !== null) {
                const div = document.createElement('div');
                div.className = 'form-group';

                const label = document.createElement('label');
                label.textContent = match[1] + ':';
                label.className = 'mr-2';

                const input = document.createElement('input');
                input.type = 'text';
                input.id = match[1];
                input.placeholder = 'Enter ' + match[1];
                input.className = 'form-control';

                div.appendChild(label);
                div.appendChild(input);
                inputFields.appendChild(div);
            }
        }

        function updateTemplate() {
            const templateIndex = document.getElementById('templateSelect').value;
            if (templateIndex === '') return;

            let template = templates[templateIndex];
            const regex = /<([^>]+)>/g;
            let match;

            while ((match = regex.exec(template)) !== null) {
                const input = document.getElementById(match[1]);
                template = template.replace(`<${match[1]}>`, input.value || `<${match[1]}>`);
            }

            document.getElementById('templateDisplay').innerHTML = template;
        }

        function copyTemplate() {
            const templateText = document.getElementById('templateDisplay').textContent;
            navigator.clipboard.writeText(templateText).then(() => {
                alert('Template copied to clipboard!');
            });
        }

        function saveTemplate() {
            const templateText = document.getElementById('templateDisplay').textContent;
            const savedTemplate = document.getElementById('savedTemplate');
            savedTemplate.value = templateText;
        }

        function deleteTemplate() {
            const templateIndex = document.getElementById('templateSelect').value;
            if (templateIndex === '') {
                alert('Please select a template to delete.');
                return;
            }

            templates.splice(templateIndex, 1);
            saveTemplatesToLocalStorage();
            updateTemplateSelect();
            document.getElementById('templateDisplay').innerHTML = '';
            document.getElementById('inputFields').innerHTML = '';
        }

        function resetTemplates() {
            templates = [];
            saveTemplatesToLocalStorage();
            updateTemplateSelect();
            document.getElementById('templateDisplay').innerHTML = '';
            document.getElementById('inputFields').innerHTML = '';
        }

        function saveTemplatesToLocalStorage() {
            localStorage.setItem('templates', JSON.stringify(templates));
        }

        function loadTemplatesFromLocalStorage() {
            const storedTemplates = localStorage.getItem('templates');
            if (storedTemplates) {
                templates = JSON.parse(storedTemplates);
            }
        }
    </script>
</body>
</html>
